{"remainingRequest":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/src/views/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/src/views/Calendar.vue","mtime":1592928482507},{"path":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Documentos/Vue_Troya/troyaweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKaW1wb3J0IGluZm8gZnJvbSAiQC9pbmZvcm1hdGlvbiI7CmltcG9ydCBkYiBmcm9tICJAL2ZiIgoKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5pbml0KCk7CgogICAgZGIuY29sbGVjdGlvbigiUmVzdWx0YWRvcyIpLm9uU25hcHNob3QocmVzID0+IHsKICAgICAgY29uc3QgY2hhbmdlcyA9IHJlcy5kb2NDaGFuZ2VzKCk7CgogICAgICBjaGFuZ2VzLmZvckVhY2goY2hhbmdlID0+IHsKICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICJhZGRlZCIpIHsKICAgICAgICAgIHRoaXMucmVzdWx0c0xpc3QucHVzaCh7CiAgICAgICAgICAgIC4uLmNoYW5nZS5kb2MuZGF0YSgpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSk7CgogICAgICB0aGlzLnNldFJlc3VsdCgpOwogICAgfSk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGpOdW06IDAsCiAgICAgIGltZzogbnVsbCwKICAgICAgcmVzdWx0c0xpc3Q6W10sCiAgICAgIGN1cnJlbnRSZXN1bHQ6ICIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1vdmVKb3JuYWRhOiBmdW5jdGlvbihkaXJlY3Rpb24pIHsKICAgICAgaWYgKGRpcmVjdGlvbiA9PSAwKSB7CiAgICAgICAgaWYgKHRoaXMuak51bSA+IDEpIHsKICAgICAgICAgIHRoaXMuak51bS0tOwogICAgICAgICAgdGhpcy5pbWcgPSByZXF1aXJlKCJAL2Fzc2V0cy9Kb3JuYWRhcy9qIiArIHRoaXMuak51bSArICIucG5nIik7CiAgICAgICAgICB0aGlzLnNldFJlc3VsdCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gMSkgewogICAgICAgIGlmICh0aGlzLmpOdW0gPCAzMCkgewogICAgICAgICAgdGhpcy5qTnVtKys7CiAgICAgICAgICB0aGlzLmltZyA9IHJlcXVpcmUoIkAvYXNzZXRzL0pvcm5hZGFzL2oiICsgdGhpcy5qTnVtICsgIi5wbmciKTsKICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0UmVzdWx0OiBmdW5jdGlvbigpewoKICAgICAgbGV0IGkgPSAwOwogICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgbGV0IHNpemUgPSB0aGlzLnJlc3VsdHNMaXN0Lmxlbmd0aDsKCiAgICAgIHdoaWxlKGk8c2l6ZSAmJiAhZm91bmQpewogICAgICAgIGlmKHRoaXMuak51bSA9PSB0aGlzLnJlc3VsdHNMaXN0W2ldLmpOdW0pewogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgaSsrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYoZm91bmQpewogICAgICAgIHRoaXMuY3VycmVudFJlc3VsdCA9IHRoaXMucmVzdWx0c0xpc3RbaV0uUmVzdWx0OwogICAgICB9CgogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICBEYXRlLnByb3RvdHlwZS5nZXRXZWVrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG9uZWphbiA9IG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgMCwgMSk7CiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCgKICAgICAgICAgICgodGhpcyAtIG9uZWphbikgLyA4NjQwMDAwMCArIG9uZWphbi5nZXREYXkoKSArIDEpIC8gNwogICAgICAgICk7CiAgICAgIH07CgogICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpOwoKICAgICAgbGV0IHRvZGF5V2VlayA9IHRvZGF5LmdldFdlZWsoKTsKCiAgICAgIGxldCBtYXRjaEluZGV4ID0gdGhpcy5sb29rRm9yTWF0Y2godG9kYXlXZWVrKTsKCiAgICAgIGlmIChtYXRjaEluZGV4ID09IC0xKSB7CiAgICAgICAgdGhpcy5qTnVtID0gMTU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5qTnVtID0gaW5mby5tYXRjaGVzW21hdGNoSW5kZXhdLmo7CiAgICAgIH0KICAgICAgdGhpcy5pbWcgPSByZXF1aXJlKCJAL2Fzc2V0cy9Kb3JuYWRhcy9qIiArIHRoaXMuak51bSArICIucG5nIik7CiAgICB9LAogICAgc3BsaXREYXRlOiBmdW5jdGlvbihmZWNoYSkgewogICAgICBsZXQgYXJyYXkgPSBmZWNoYS5zcGxpdCgiLyIpOwoKICAgICAgYXJyYXlbMF0gPSBOdW1iZXIoYXJyYXlbMF0pOwogICAgICBhcnJheVsxXSA9IE51bWJlcihhcnJheVsxXSk7CiAgICAgIGFycmF5WzJdID0gTnVtYmVyKGFycmF5WzJdKTsKCiAgICAgIHJldHVybiBhcnJheS5yZXZlcnNlKCk7CiAgICB9LAogICAgbG9va0Zvck1hdGNoOiBmdW5jdGlvbih3ZWVrKSB7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICBsZXQgaSA9IDA7CiAgICAgIGxldCBzaXplID0gaW5mby5tYXRjaGVzLmxlbmd0aDsKCiAgICAgIHdoaWxlIChpIDwgc2l6ZSAmJiAhZm91bmQpIHsKICAgICAgICBsZXQgYXJyYXkgPSB0aGlzLnNwbGl0RGF0ZShpbmZvLm1hdGNoZXNbaV0uZGF0ZSk7CgogICAgICAgIGxldCBtYXRjaFdlZWsgPQogICAgICAgICAgbmV3IERhdGUoYXJyYXlbMF0sIGFycmF5WzFdIC0gMSwgYXJyYXlbMl0pLmdldFdlZWsoKSAtIDE7CgogICAgICAgIGlmIChtYXRjaFdlZWsgPT0gd2VlaykgewogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpKys7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZm91bmQpIHsKICAgICAgICByZXR1cm4gaTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <h1>TroyaWEB (Calendario)</h1>\n\n    <div class=\"try\">\n      <v-toolbar id=\"toolbarCalendar\" class=\"teal lighten-4 black--text\">\n        <v-btn icon @click=\"moveJornada(0)\" class=\"black--text\">\n          <v-icon>mdi-arrow-left-bold</v-icon>\n        </v-btn>\n\n        <v-spacer></v-spacer>\n\n        <v-toolbar-title>Jornada {{jNum}}</v-toolbar-title>\n\n        <v-spacer></v-spacer>\n\n        <v-btn icon @click=\"moveJornada(1)\" class=\"black--text\">\n          <v-icon>mdi-arrow-right-bold</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-card id=\"imgJornada\">\n        <v-img :src=\"img\" style=\"margin:10px\"></v-img>\n      </v-card>\n\n      <v-card id=\"resultJornada\">\n        <h4>Resultado:</h4>\n        <h2>{{currentResult}}</h2>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport info from \"@/information\";\nimport db from \"@/fb\"\n\nexport default {\n  created: function() {\n    this.init();\n\n    db.collection(\"Resultados\").onSnapshot(res => {\n      const changes = res.docChanges();\n\n      changes.forEach(change => {\n        if (change.type === \"added\") {\n          this.resultsList.push({\n            ...change.doc.data()\n          })\n        }\n      });\n\n      this.setResult();\n    });\n  },\n  data: function() {\n    return {\n      jNum: 0,\n      img: null,\n      resultsList:[],\n      currentResult: \"\",\n    };\n  },\n  methods: {\n    moveJornada: function(direction) {\n      if (direction == 0) {\n        if (this.jNum > 1) {\n          this.jNum--;\n          this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n          this.setResult();\n        }\n      } else if (direction == 1) {\n        if (this.jNum < 30) {\n          this.jNum++;\n          this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n          this.setResult();\n        }\n      }\n    },\n    setResult: function(){\n\n      let i = 0;\n      let found = false;\n      let size = this.resultsList.length;\n\n      while(i<size && !found){\n        if(this.jNum == this.resultsList[i].jNum){\n          found = true;\n        }\n        else{\n          i++;\n        }\n      }\n\n      if(found){\n        this.currentResult = this.resultsList[i].Result;\n      }\n\n    },\n    init: function() {\n      Date.prototype.getWeek = function() {\n        var onejan = new Date(this.getFullYear(), 0, 1);\n        return Math.ceil(\n          ((this - onejan) / 86400000 + onejan.getDay() + 1) / 7\n        );\n      };\n\n      let today = new Date();\n\n      let todayWeek = today.getWeek();\n\n      let matchIndex = this.lookForMatch(todayWeek);\n\n      if (matchIndex == -1) {\n        this.jNum = 15;\n      } else {\n        this.jNum = info.matches[matchIndex].j;\n      }\n      this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n    },\n    splitDate: function(fecha) {\n      let array = fecha.split(\"/\");\n\n      array[0] = Number(array[0]);\n      array[1] = Number(array[1]);\n      array[2] = Number(array[2]);\n\n      return array.reverse();\n    },\n    lookForMatch: function(week) {\n      let found = false;\n      let i = 0;\n      let size = info.matches.length;\n\n      while (i < size && !found) {\n        let array = this.splitDate(info.matches[i].date);\n\n        let matchWeek =\n          new Date(array[0], array[1] - 1, array[2]).getWeek() - 1;\n\n        if (matchWeek == week) {\n          found = true;\n        } else {\n          i++;\n        }\n      }\n\n      if (found) {\n        return i;\n      } else {\n        return -1;\n      }\n    }\n  }\n};\n</script>\n"]}]}
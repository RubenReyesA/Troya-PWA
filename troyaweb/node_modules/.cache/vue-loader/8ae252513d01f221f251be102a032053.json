{"remainingRequest":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/src/views/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/src/views/Calendar.vue","mtime":1593251346499},{"path":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/RepoGitHub/Troya-PWA/troyaweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKaW1wb3J0IGluZm8gZnJvbSAiQC9pbmZvcm1hdGlvbiI7CmltcG9ydCBmYiBmcm9tICJAL2ZiIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuaW5pdCgpOwoKICAgIGZiLmRiLmNvbGxlY3Rpb24oIlJlc3VsdGFkb3MiKS5vblNuYXBzaG90KHJlcyA9PiB7CiAgICAgIGNvbnN0IGNoYW5nZXMgPSByZXMuZG9jQ2hhbmdlcygpOwoKICAgICAgY2hhbmdlcy5mb3JFYWNoKGNoYW5nZSA9PiB7CiAgICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAiYWRkZWQiKSB7CiAgICAgICAgICB0aGlzLnJlc3VsdHNMaXN0LnB1c2goewogICAgICAgICAgICAuLi5jaGFuZ2UuZG9jLmRhdGEoKQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuc2V0UmVzdWx0KCk7CiAgICB9KTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgak51bTogMCwKICAgICAgaW1nOiBudWxsLAogICAgICByZXN1bHRzTGlzdDogW10sCiAgICAgIGN1cnJlbnRSZXN1bHQ6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbW92ZUpvcm5hZGE6IGZ1bmN0aW9uKGRpcmVjdGlvbikgewogICAgICBpZiAoZGlyZWN0aW9uID09IDApIHsKICAgICAgICBpZiAodGhpcy5qTnVtID4gMSkgewogICAgICAgICAgdGhpcy5qTnVtLS07CiAgICAgICAgICB0aGlzLmltZyA9IHJlcXVpcmUoIkAvYXNzZXRzL0pvcm5hZGFzL2oiICsgdGhpcy5qTnVtICsgIi5wbmciKTsKICAgICAgICAgIHRoaXMuc2V0UmVzdWx0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSAxKSB7CiAgICAgICAgaWYgKHRoaXMuak51bSA8IDMwKSB7CiAgICAgICAgICB0aGlzLmpOdW0rKzsKICAgICAgICAgIHRoaXMuaW1nID0gcmVxdWlyZSgiQC9hc3NldHMvSm9ybmFkYXMvaiIgKyB0aGlzLmpOdW0gKyAiLnBuZyIpOwogICAgICAgICAgdGhpcy5zZXRSZXN1bHQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZXRSZXN1bHQ6IGZ1bmN0aW9uKCkgewogICAgICBsZXQgaSA9IDA7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICBsZXQgc2l6ZSA9IHRoaXMucmVzdWx0c0xpc3QubGVuZ3RoOwoKICAgICAgd2hpbGUgKGkgPCBzaXplICYmICFmb3VuZCkgewogICAgICAgIGlmICh0aGlzLmpOdW0gPT0gdGhpcy5yZXN1bHRzTGlzdFtpXS5qTnVtKSB7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGkrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmb3VuZCkgewogICAgICAgIHRoaXMuY3VycmVudFJlc3VsdCA9IHRoaXMucmVzdWx0c0xpc3RbaV0uUmVzdWx0OwogICAgICB9CiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICAgIERhdGUucHJvdG90eXBlLmdldFdlZWsgPSBmdW5jdGlvbigpIHsKICAgICAgICBsZXQgZHQgPSB0aGlzOwogICAgICAgIHZhciB0ZHQgPSBuZXcgRGF0ZShkdC52YWx1ZU9mKCkpOwogICAgICAgIHZhciBkYXluID0gKGR0LmdldERheSgpICsgNikgJSA3OwogICAgICAgIHRkdC5zZXREYXRlKHRkdC5nZXREYXRlKCkgLSBkYXluICsgMyk7CiAgICAgICAgdmFyIGZpcnN0VGh1cnNkYXkgPSB0ZHQudmFsdWVPZigpOwogICAgICAgIHRkdC5zZXRNb250aCgwLCAxKTsKICAgICAgICBpZiAodGR0LmdldERheSgpICE9PSA0KSB7CiAgICAgICAgICB0ZHQuc2V0TW9udGgoMCwgMSArICgoNCAtIHRkdC5nZXREYXkoKSArIDcpICUgNykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMSArIE1hdGguY2VpbCgoZmlyc3RUaHVyc2RheSAtIHRkdCkgLyA2MDQ4MDAwMDApOwogICAgICB9OwoKICAgICAgbGV0IHRvZGF5ID0gbmV3IERhdGUoKTsKCiAgICAgIGxldCB0b2RheVdlZWsgPSB0b2RheS5nZXRXZWVrKCk7CgogICAgICBsZXQgbWF0Y2hJbmRleCA9IHRoaXMubG9va0Zvck1hdGNoKHRvZGF5V2Vlayk7CgogICAgICBpZiAobWF0Y2hJbmRleCA9PSAtMSkgewogICAgICAgIHRoaXMuak51bSA9IDE1OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuak51bSA9IGluZm8ubWF0Y2hlc1ttYXRjaEluZGV4XS5qOwogICAgICB9CiAgICAgIHRoaXMuaW1nID0gcmVxdWlyZSgiQC9hc3NldHMvSm9ybmFkYXMvaiIgKyB0aGlzLmpOdW0gKyAiLnBuZyIpOwogICAgfSwKICAgIHNwbGl0RGF0ZTogZnVuY3Rpb24oZmVjaGEpIHsKICAgICAgbGV0IGFycmF5ID0gZmVjaGEuc3BsaXQoIi8iKTsKCiAgICAgIGFycmF5WzBdID0gTnVtYmVyKGFycmF5WzBdKTsKICAgICAgYXJyYXlbMV0gPSBOdW1iZXIoYXJyYXlbMV0pOwogICAgICBhcnJheVsyXSA9IE51bWJlcihhcnJheVsyXSk7CgogICAgICByZXR1cm4gYXJyYXkucmV2ZXJzZSgpOwogICAgfSwKICAgIGxvb2tGb3JNYXRjaDogZnVuY3Rpb24od2VlaykgewogICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgbGV0IGkgPSAwOwogICAgICBsZXQgc2l6ZSA9IGluZm8ubWF0Y2hlcy5sZW5ndGg7CgogICAgICB3aGlsZSAoaSA8IHNpemUgJiYgIWZvdW5kKSB7CiAgICAgICAgbGV0IGFycmF5ID0gdGhpcy5zcGxpdERhdGUoaW5mby5tYXRjaGVzW2ldLmRhdGUpOwogICAgICAgIGxldCB0ZXN0RGF0ZSA9IG5ldyBEYXRlKGFycmF5WzBdLCBhcnJheVsxXSAtIDEsIGFycmF5WzJdKTsKICAgICAgICBsZXQgbWF0Y2hXZWVrID0gdGVzdERhdGUuZ2V0V2VlaygpOwoKICAgICAgICBpZiAobWF0Y2hXZWVrID09IHdlZWspIHsKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaSsrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGZvdW5kKSB7CiAgICAgICAgcmV0dXJuIGk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n\n    <div class=\"try\">\n      <v-toolbar class=\"toolbarPage teal lighten-4 black--text\">\n        <v-spacer></v-spacer>\n\n        <v-toolbar-title>Calendario</v-toolbar-title>\n\n        <v-spacer></v-spacer>\n      </v-toolbar>\n\n      <v-toolbar class=\"toolbarJornada indigo lighten-4 black--text\">\n        <v-btn icon @click=\"moveJornada(0)\" class=\"black--text\">\n          <v-icon>mdi-arrow-left-bold</v-icon>\n        </v-btn>\n\n        <v-spacer></v-spacer>\n\n        <v-toolbar-title>Jornada {{jNum}}</v-toolbar-title>\n\n        <v-spacer></v-spacer>\n\n        <v-btn icon @click=\"moveJornada(1)\" class=\"black--text\">\n          <v-icon>mdi-arrow-right-bold</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-card id=\"imgJornada\">\n        <v-img :src=\"img\" style=\"margin:10px\"></v-img>\n      </v-card>\n\n      <v-card id=\"resultJornada\">\n        <h4>Resultado:</h4>\n        <h2>{{currentResult}}</h2>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport info from \"@/information\";\nimport fb from \"@/fb\";\n\nexport default {\n  created: function() {\n    this.init();\n\n    fb.db.collection(\"Resultados\").onSnapshot(res => {\n      const changes = res.docChanges();\n\n      changes.forEach(change => {\n        if (change.type === \"added\") {\n          this.resultsList.push({\n            ...change.doc.data()\n          });\n        }\n      });\n\n      this.setResult();\n    });\n  },\n  data: function() {\n    return {\n      jNum: 0,\n      img: null,\n      resultsList: [],\n      currentResult: \"\"\n    };\n  },\n  methods: {\n    moveJornada: function(direction) {\n      if (direction == 0) {\n        if (this.jNum > 1) {\n          this.jNum--;\n          this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n          this.setResult();\n        }\n      } else if (direction == 1) {\n        if (this.jNum < 30) {\n          this.jNum++;\n          this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n          this.setResult();\n        }\n      }\n    },\n    setResult: function() {\n      let i = 0;\n      let found = false;\n      let size = this.resultsList.length;\n\n      while (i < size && !found) {\n        if (this.jNum == this.resultsList[i].jNum) {\n          found = true;\n        } else {\n          i++;\n        }\n      }\n\n      if (found) {\n        this.currentResult = this.resultsList[i].Result;\n      }\n    },\n    init: function() {\n      Date.prototype.getWeek = function() {\n        let dt = this;\n        var tdt = new Date(dt.valueOf());\n        var dayn = (dt.getDay() + 6) % 7;\n        tdt.setDate(tdt.getDate() - dayn + 3);\n        var firstThursday = tdt.valueOf();\n        tdt.setMonth(0, 1);\n        if (tdt.getDay() !== 4) {\n          tdt.setMonth(0, 1 + ((4 - tdt.getDay() + 7) % 7));\n        }\n        return 1 + Math.ceil((firstThursday - tdt) / 604800000);\n      };\n\n      let today = new Date();\n\n      let todayWeek = today.getWeek();\n\n      let matchIndex = this.lookForMatch(todayWeek);\n\n      if (matchIndex == -1) {\n        this.jNum = 15;\n      } else {\n        this.jNum = info.matches[matchIndex].j;\n      }\n      this.img = require(\"@/assets/Jornadas/j\" + this.jNum + \".png\");\n    },\n    splitDate: function(fecha) {\n      let array = fecha.split(\"/\");\n\n      array[0] = Number(array[0]);\n      array[1] = Number(array[1]);\n      array[2] = Number(array[2]);\n\n      return array.reverse();\n    },\n    lookForMatch: function(week) {\n      let found = false;\n      let i = 0;\n      let size = info.matches.length;\n\n      while (i < size && !found) {\n        let array = this.splitDate(info.matches[i].date);\n        let testDate = new Date(array[0], array[1] - 1, array[2]);\n        let matchWeek = testDate.getWeek();\n\n        if (matchWeek == week) {\n          found = true;\n        } else {\n          i++;\n        }\n      }\n\n      if (found) {\n        return i;\n      } else {\n        return -1;\n      }\n    }\n  }\n};\n</script>\n"]}]}
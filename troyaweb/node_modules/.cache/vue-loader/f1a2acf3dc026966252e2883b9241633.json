{"remainingRequest":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/src/views/Calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/src/views/Calendar.vue","mtime":1601361621110},{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Documentos/Troya/Vue/troyaweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKaW1wb3J0IGluZm8gZnJvbSAiQC9pbmZvcm1hdGlvbiI7CmltcG9ydCBmYiBmcm9tICJAL2ZiIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmluaXQoKTsKCiAgICBmYi5kYi5jb2xsZWN0aW9uKCJSZXN1bHRhZG9zIikub25TbmFwc2hvdCgocmVzKSA9PiB7CiAgICAgIGNvbnN0IGNoYW5nZXMgPSByZXMuZG9jQ2hhbmdlcygpOwoKICAgICAgY2hhbmdlcy5mb3JFYWNoKChjaGFuZ2UpID0+IHsKICAgICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICJhZGRlZCIpIHsKICAgICAgICAgIHRoaXMucmVzdWx0c0xpc3QucHVzaCh7CiAgICAgICAgICAgIC4uLmNoYW5nZS5kb2MuZGF0YSgpLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuc2V0UmVzdWx0KCk7CiAgICB9KTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGpOdW06IDAsCiAgICAgIGltZzogbnVsbCwKICAgICAgcmVzdWx0c0xpc3Q6IFtdLAogICAgICBjdXJyZW50UmVzdWx0OiAiIiwKICAgICAgYXJyYXlKOiBbXSwKICAgICAgalRvU2hvdzogW10sCiAgICAgIHYxOiAiIiwKICAgICAgdjI6ICIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1vdmVKb3JuYWRhOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7CiAgICAgIGlmIChkaXJlY3Rpb24gPT0gMCkgewogICAgICAgIGlmICh0aGlzLmpOdW0gPiAxKSB7CiAgICAgICAgICB0aGlzLmpOdW0tLTsKCiAgICAgICAgICB0aGlzLmpUb1Nob3cgPSBbXTsKICAgICAgICAgIHRoaXMudjEgPSAiIjsKICAgICAgICAgIHRoaXMudjIgPSAiIjsKCiAgICAgICAgICBsZXQgY291bnQgPSAtMTsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyYXlKW3RoaXMuak51bSAtIDFdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpICUgMiA9PSAwKSB7CiAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICB0aGlzLmpUb1Nob3cucHVzaChbXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMualRvU2hvd1tjb3VudF0ucHVzaCh0aGlzLmFycmF5Slt0aGlzLmpOdW0gLSAxXVtpXSk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy52MSA9IHRoaXMualRvU2hvd1swXVswXTsKICAgICAgICAgIHRoaXMudjIgPSB0aGlzLmpUb1Nob3dbMF1bMV07CgogICAgICAgICAgdGhpcy5qVG9TaG93LnNoaWZ0KCk7CgogICAgICAgICAgdGhpcy5zZXRSZXN1bHQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09IDEpIHsKICAgICAgICBpZiAodGhpcy5qTnVtIDwgMzApIHsKICAgICAgICAgIHRoaXMuak51bSsrOwoKICAgICAgICAgIHRoaXMualRvU2hvdyA9IFtdOwogICAgICAgICAgdGhpcy52MSA9ICIiOwogICAgICAgICAgdGhpcy52MiA9ICIiOwoKICAgICAgICAgIGxldCBjb3VudCA9IC0xOwoKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcnJheUpbdGhpcy5qTnVtIC0gMV0ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgJSAyID09IDApIHsKICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgIHRoaXMualRvU2hvdy5wdXNoKFtdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5qVG9TaG93W2NvdW50XS5wdXNoKHRoaXMuYXJyYXlKW3RoaXMuak51bSAtIDFdW2ldKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnYxID0gdGhpcy5qVG9TaG93WzBdWzBdOwogICAgICAgICAgdGhpcy52MiA9IHRoaXMualRvU2hvd1swXVsxXTsKCiAgICAgICAgICB0aGlzLmpUb1Nob3cuc2hpZnQoKTsKCiAgICAgICAgICB0aGlzLnNldFJlc3VsdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldFJlc3VsdDogZnVuY3Rpb24gKCkgewogICAgICBsZXQgaSA9IDA7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICBsZXQgc2l6ZSA9IHRoaXMucmVzdWx0c0xpc3QubGVuZ3RoOwoKICAgICAgd2hpbGUgKGkgPCBzaXplICYmICFmb3VuZCkgewogICAgICAgIGlmICh0aGlzLmpOdW0gPT0gdGhpcy5yZXN1bHRzTGlzdFtpXS5qTnVtKSB7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGkrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmb3VuZCkgewogICAgICAgIHRoaXMuY3VycmVudFJlc3VsdCA9IHRoaXMucmVzdWx0c0xpc3RbaV0uUmVzdWx0OwogICAgICB9CiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBEYXRlLnByb3RvdHlwZS5nZXRXZWVrID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBkdCA9IHRoaXM7CiAgICAgICAgdmFyIHRkdCA9IG5ldyBEYXRlKGR0LnZhbHVlT2YoKSk7CiAgICAgICAgdmFyIGRheW4gPSAoZHQuZ2V0RGF5KCkgKyA2KSAlIDc7CiAgICAgICAgdGR0LnNldERhdGUodGR0LmdldERhdGUoKSAtIGRheW4gKyAzKTsKICAgICAgICB2YXIgZmlyc3RUaHVyc2RheSA9IHRkdC52YWx1ZU9mKCk7CiAgICAgICAgdGR0LnNldE1vbnRoKDAsIDEpOwogICAgICAgIGlmICh0ZHQuZ2V0RGF5KCkgIT09IDQpIHsKICAgICAgICAgIHRkdC5zZXRNb250aCgwLCAxICsgKCg0IC0gdGR0LmdldERheSgpICsgNykgJSA3KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAxICsgTWF0aC5jZWlsKChmaXJzdFRodXJzZGF5IC0gdGR0KSAvIDYwNDgwMDAwMCk7CiAgICAgIH07CgogICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpOwoKICAgICAgbGV0IHRvZGF5V2VlayA9IHRvZGF5LmdldFdlZWsoKTsKCiAgICAgIGxldCBtYXRjaEluZGV4ID0gdGhpcy5sb29rRm9yTWF0Y2godG9kYXlXZWVrKTsKCiAgICAgIGlmIChtYXRjaEluZGV4ID09IC0xKSB7CiAgICAgICAgdGhpcy5qTnVtID0gMTU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5qTnVtID0gaW5mby5tYXRjaGVzW21hdGNoSW5kZXhdLmo7CiAgICAgIH0KCiAgICAgIGxldCB0ID0gSlNPTi5wYXJzZShpbmZvLmpvcm5hZGFzVGV4dCk7CgogICAgICBsZXQgY291bnQgPSAtMTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChpICUgMTggPT0gMCkgewogICAgICAgICAgY291bnQrKzsKICAgICAgICAgIHRoaXMuYXJyYXlKLnB1c2goW10pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hcnJheUpbY291bnRdLnB1c2godFtpXSk7CiAgICAgIH0KCiAgICAgIGNvdW50ID0gLTE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXJyYXlKW3RoaXMuak51bSAtIDFdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGkgJSAyID09IDApIHsKICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICB0aGlzLmpUb1Nob3cucHVzaChbXSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmpUb1Nob3dbY291bnRdLnB1c2godGhpcy5hcnJheUpbdGhpcy5qTnVtIC0gMV1baV0pOwogICAgICB9CgogICAgICB0aGlzLnYxID0gdGhpcy5qVG9TaG93WzBdWzBdOwogICAgICB0aGlzLnYyID0gdGhpcy5qVG9TaG93WzBdWzFdOwoKICAgICAgdGhpcy5qVG9TaG93LnNoaWZ0KCk7CiAgICB9LAogICAgc3BsaXREYXRlOiBmdW5jdGlvbiAoZmVjaGEpIHsKICAgICAgbGV0IGFycmF5ID0gZmVjaGEuc3BsaXQoIi8iKTsKCiAgICAgIGFycmF5WzBdID0gTnVtYmVyKGFycmF5WzBdKTsKICAgICAgYXJyYXlbMV0gPSBOdW1iZXIoYXJyYXlbMV0pOwogICAgICBhcnJheVsyXSA9IE51bWJlcihhcnJheVsyXSk7CgogICAgICByZXR1cm4gYXJyYXkucmV2ZXJzZSgpOwogICAgfSwKICAgIGxvb2tGb3JNYXRjaDogZnVuY3Rpb24gKHdlZWspIHsKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgIGxldCBpID0gMDsKICAgICAgbGV0IHNpemUgPSBpbmZvLm1hdGNoZXMubGVuZ3RoOwoKICAgICAgd2hpbGUgKGkgPCBzaXplICYmICFmb3VuZCkgewogICAgICAgIGxldCBhcnJheSA9IHRoaXMuc3BsaXREYXRlKGluZm8ubWF0Y2hlc1tpXS5kYXRlKTsKICAgICAgICBsZXQgdGVzdERhdGUgPSBuZXcgRGF0ZShhcnJheVswXSwgYXJyYXlbMV0gLSAxLCBhcnJheVsyXSk7CiAgICAgICAgbGV0IG1hdGNoV2VlayA9IHRlc3REYXRlLmdldFdlZWsoKTsKCiAgICAgICAgaWYgKG1hdGNoV2VlayA9PSB3ZWVrKSB7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGkrKzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmb3VuZCkgewogICAgICAgIHJldHVybiBpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Calendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <div class=\"try\">\n      <v-toolbar class=\"toolbarPage teal lighten-4 black--text\">\n        <v-spacer></v-spacer>\n\n        <v-toolbar-title>Calendario</v-toolbar-title>\n\n        <v-spacer></v-spacer>\n      </v-toolbar>\n\n      <v-toolbar class=\"toolbarJornada indigo lighten-4 black--text\">\n        <v-btn icon @click=\"moveJornada(0)\" class=\"black--text\">\n          <v-icon>mdi-arrow-left-bold</v-icon>\n        </v-btn>\n\n        <v-spacer></v-spacer>\n\n        <v-toolbar-title>Jornada {{ jNum }}</v-toolbar-title>\n\n        <v-spacer></v-spacer>\n\n        <v-btn icon @click=\"moveJornada(1)\" class=\"black--text\">\n          <v-icon>mdi-arrow-right-bold</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-card id=\"imgJornada\">\n        <v-simple-table>\n          <template v-slot:default>\n            <thead>\n              <tr>\n                <th class=\"text-center\">{{ v1 }}</th>\n                <th class=\"text-center\"></th>\n                <th class=\"text-center\">{{ v2 }}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"item in jToShow\" :key=\"item.i\">\n                <td class=\"text-center\">{{ item[0] }}</td>\n                <td class=\"text-center\">.vs.</td>\n                <td class=\"text-center\">{{ item[1] }}</td>\n              </tr>\n            </tbody>\n          </template>\n        </v-simple-table>\n      </v-card>\n\n      <v-card id=\"resultJornada\">\n        <h4>Resultado:</h4>\n        <h2>{{ currentResult }}</h2>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport info from \"@/information\";\nimport fb from \"@/fb\";\n\nexport default {\n  created: function () {\n    this.init();\n\n    fb.db.collection(\"Resultados\").onSnapshot((res) => {\n      const changes = res.docChanges();\n\n      changes.forEach((change) => {\n        if (change.type === \"added\") {\n          this.resultsList.push({\n            ...change.doc.data(),\n          });\n        }\n      });\n\n      this.setResult();\n    });\n  },\n  data: function () {\n    return {\n      jNum: 0,\n      img: null,\n      resultsList: [],\n      currentResult: \"\",\n      arrayJ: [],\n      jToShow: [],\n      v1: \"\",\n      v2: \"\",\n    };\n  },\n  methods: {\n    moveJornada: function (direction) {\n      if (direction == 0) {\n        if (this.jNum > 1) {\n          this.jNum--;\n\n          this.jToShow = [];\n          this.v1 = \"\";\n          this.v2 = \"\";\n\n          let count = -1;\n\n          for (let i = 0; i < this.arrayJ[this.jNum - 1].length; i++) {\n            if (i % 2 == 0) {\n              count++;\n              this.jToShow.push([]);\n            }\n\n            this.jToShow[count].push(this.arrayJ[this.jNum - 1][i]);\n          }\n\n          this.v1 = this.jToShow[0][0];\n          this.v2 = this.jToShow[0][1];\n\n          this.jToShow.shift();\n\n          this.setResult();\n        }\n      } else if (direction == 1) {\n        if (this.jNum < 30) {\n          this.jNum++;\n\n          this.jToShow = [];\n          this.v1 = \"\";\n          this.v2 = \"\";\n\n          let count = -1;\n\n          for (let i = 0; i < this.arrayJ[this.jNum - 1].length; i++) {\n            if (i % 2 == 0) {\n              count++;\n              this.jToShow.push([]);\n            }\n\n            this.jToShow[count].push(this.arrayJ[this.jNum - 1][i]);\n          }\n\n          this.v1 = this.jToShow[0][0];\n          this.v2 = this.jToShow[0][1];\n\n          this.jToShow.shift();\n\n          this.setResult();\n        }\n      }\n    },\n    setResult: function () {\n      let i = 0;\n      let found = false;\n      let size = this.resultsList.length;\n\n      while (i < size && !found) {\n        if (this.jNum == this.resultsList[i].jNum) {\n          found = true;\n        } else {\n          i++;\n        }\n      }\n\n      if (found) {\n        this.currentResult = this.resultsList[i].Result;\n      }\n    },\n    init: function () {\n      Date.prototype.getWeek = function () {\n        let dt = this;\n        var tdt = new Date(dt.valueOf());\n        var dayn = (dt.getDay() + 6) % 7;\n        tdt.setDate(tdt.getDate() - dayn + 3);\n        var firstThursday = tdt.valueOf();\n        tdt.setMonth(0, 1);\n        if (tdt.getDay() !== 4) {\n          tdt.setMonth(0, 1 + ((4 - tdt.getDay() + 7) % 7));\n        }\n        return 1 + Math.ceil((firstThursday - tdt) / 604800000);\n      };\n\n      let today = new Date();\n\n      let todayWeek = today.getWeek();\n\n      let matchIndex = this.lookForMatch(todayWeek);\n\n      if (matchIndex == -1) {\n        this.jNum = 15;\n      } else {\n        this.jNum = info.matches[matchIndex].j;\n      }\n\n      let t = JSON.parse(info.jornadasText);\n\n      let count = -1;\n\n      for (let i = 0; i < t.length; i++) {\n        if (i % 18 == 0) {\n          count++;\n          this.arrayJ.push([]);\n        }\n\n        this.arrayJ[count].push(t[i]);\n      }\n\n      count = -1;\n\n      for (let i = 0; i < this.arrayJ[this.jNum - 1].length; i++) {\n        if (i % 2 == 0) {\n          count++;\n          this.jToShow.push([]);\n        }\n\n        this.jToShow[count].push(this.arrayJ[this.jNum - 1][i]);\n      }\n\n      this.v1 = this.jToShow[0][0];\n      this.v2 = this.jToShow[0][1];\n\n      this.jToShow.shift();\n    },\n    splitDate: function (fecha) {\n      let array = fecha.split(\"/\");\n\n      array[0] = Number(array[0]);\n      array[1] = Number(array[1]);\n      array[2] = Number(array[2]);\n\n      return array.reverse();\n    },\n    lookForMatch: function (week) {\n      let found = false;\n      let i = 0;\n      let size = info.matches.length;\n\n      while (i < size && !found) {\n        let array = this.splitDate(info.matches[i].date);\n        let testDate = new Date(array[0], array[1] - 1, array[2]);\n        let matchWeek = testDate.getWeek();\n\n        if (matchWeek == week) {\n          found = true;\n        } else {\n          i++;\n        }\n      }\n\n      if (found) {\n        return i;\n      } else {\n        return -1;\n      }\n    },\n  },\n};\n</script>\n"]}]}